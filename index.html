<html>
  <head>
    <meta charset="utf-8" />
    <title>WebAssembly with Go</title>

    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go();
      WebAssembly.instantiateStreaming(
        fetch("main.wasm"),
        go.importObject
      ).then((result) => {
        go.run(result.instance);

        init();
      });
    </script>
  </head>
  <body>
    <textarea name="script" id="script" cols="30" rows="10"></textarea>
    <button id="send">Execute</button>

    <script>
      async function init() {
        const button = document.getElementById("send");
        const script = document.getElementById("script");

        button.addEventListener("click", (e) => {
          console.log(cb_execute(script.value));
        });
      }
    </script>
  </body>
</html>
